########################################################################
# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: MIT-0
########################################################################

#———————————————————————————————————————————————————————————————————————————————————————
#Security-Driven Cloud Acceleration Template Stack for AWS Shield Advanced (including AWS WAF and AWS Firewall Manager)
#Author: Christopher Rae (xrae@amazon.com)
#Date: March 1st, 2023
#———————————————————————————————————————————————————————————————————————————————————————

AWSTemplateFormatVersion: "2010-09-09"

#———————————————————————————————————————————————————————————————————————————————————————
#NOTE TO CUSTOMERS: Shield Advanced provides advanced DDoS protection. Enabling it gives you more protections and control beyond what AWS Shield Standard provides, including giving you access to use AWS WAF and Firewall Manager. Unlike other AWS services, it has a fixed monthly cost minimum of $3,000 USD. AWS strongly recommends implementing this for the protection of your workloads and accounts, however, by default it will be commented out in this CloudFormation template which requires you to manually opt-in on the service and the additional monthly costs. To offset the costs, AWS offers a Shield Advanced credit which you can apply for here to recieve up to https://docs.aws.amazon.com/waf/latest/developerguide/request-refund.html. For more information about Shield Advanced visit https://aws.amazon.com/shield/features/. If you choose to not use AWS Shield Advanced as part of this stack, the remaining services of Security Hub, GuardDuty, and KMS will still be enabled and configured, and you will only be charged for the resources you consume. If you want to proceed in enabling Shield Advanced, please follow the steps listed here: https://docs.aws.amazon.com/waf/latest/developerguide/enable-ddos-prem.html
#———————————————————————————————————————————————————————————————————————————————————————

#———————————————————————————————————————————————————————————————————————————————————————
#Configure Conformance Packs To Enable Security and Privacy Best Practices As Part of Nested Stack
#———————————————————————————————————————————————————————————————————————————————————————
#---Configure AWS Foundational Security Best Practices (FSBP)
#———————————————————————————————————————————————————————————————————————————————————————
#[INSERT THIS]https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-Security-Services.yaml
#[INSERT THIS]https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-Encryption-and-Keys.yaml
#[INSERT THIS] https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Security-Best-Practices-for-AWS-WAF.yaml

#———————————————————————————————————————————————————————————————————————————————————————
#---Setup Center for CISA Cyber Fundamentals 
#———————————————————————————————————————————————————————————————————————————————————————
#[INSERT THIS]https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-CISA-Cyber-Essentials.yaml

#———————————————————————————————————————————————————————————————————————————————————————
#---Setup Center for Internet Security (CIS) AWS Foundations Benchmark v1.4.0
#———————————————————————————————————————————————————————————————————————————————————————
#[INSERT THIS]https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-CIS-AWS-v1.4-Level2.yaml

#———————————————————————————————————————————————————————————————————————————————————————
#---Configure PCI Standard Best Practices 
#———————————————————————————————————————————————————————————————————————————————————————
#[INSERT THIS]https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-PCI-DSS.yaml

#———————————————————————————————————————————————————————————————————————————————————————
#---Setup NIST 800-53 rev 5 Security Standards
#———————————————————————————————————————————————————————————————————————————————————————
#[INSERT THIS]https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-NIST-800-53-rev-5.yaml)

#———————————————————————————————————————————————————————————————————————————————————————
#---Setup NIST Privacy Framework 1.0 Security Standards
#———————————————————————————————————————————————————————————————————————————————————————
#[INSERT THIS] https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Operational-Best-Practices-for-NIST-Privacy-Framework.yaml


#———————————————————————————————————————————————————————————————————————————————————————
# Enable AWS Shield Advanced & Configure Best Practices
#———————————————————————————————————————————————————————————————————————————————————————

#———————————————————————————————————————————————————————————————————————————————————————
# Enable AWS WAF & Configure Best Practices
#———————————————————————————————————————————————————————————————————————————————————————
# Implement AWS WAF Security Automation Template 
#[INSERT THIS] https://github.com/awslabs/aws-config-rules/blob/master/aws-config-conformance-packs/Security-Best-Practices-for-AWS-WAF.yaml


#———————————————————————————————————————————————————————————————————————————————————————
# Enable AWS Firewall Manager & Configure Best Practices
 - parameter_key: pDeployFirewallManagerSolution
        parameter_value: 'Yes'
      - parameter_key: pEnableRemediation
        parameter_value: 'false'
      - parameter_key: pInternalNetCIDR
        parameter_value: '192.168.1.0/24'
      - parameter_key: pCreateVpcForSG
        parameter_value: 'true'
      - parameter_key: pVPCCidrBlock
        parameter_value: '10.0.0.0/28'
      - parameter_key: pVpcId
        parameter_value: ''
#———————————————————————————————————————————————————————————————————————————————————————


#——————————————————————————————————————————————————
# Define and Enable Push Notifications
#——————————————————————————————————————————————————
#Subscribe to AWS Security Hub announcements with Amazon Simple Notification Service (SNS)
#Configure AWS Lambda Functions
#Set Email Alerts
#——————————————————————————————————————————————————
